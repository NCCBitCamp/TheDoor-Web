<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RozerStone</title>
    <style>
        body{
            height: 99%;
            width: 99%;
        }
        
        body div {
            display: flex;
            justify-content: left;
            align-items: center;
            height: 100px;
            font-size: 1rem;
            color: white;
            margin: 20%;
        }
        #skipButton {
            background: rgba(0, 0, 0, 0.5);
            color: darkred;
            font-weight: bold;
        }
    </style>
</head>
<div style="display: flex; justify-content: center; align-items: center; margin-top: 10px; height: 12px;">
    <button type="button" id="skipButton" name="skipButton" onclick="location.href='Part_1_3.html'">Skip</button>
</div>
<body style="background-color: black;">
    <div class="text_box" data-trigger>
        <span class="text" style="color: brown;"></span>
    </div>
    <audio id="audio"></audio>
    <script>
        const content = [
            { text: "수많은 사람들이 이 미스터리를 풀기 위해 도전했다.", audio: "Nar_2_1.mp3" },
            { text: "하지만 미스터리를 풀기는커녕 대다수의 사람들이 이 미스터리를 풀다가 실종되고만다.", audio: "Nar_2_2.mp3" },
            { text: "저주인걸까?", audio: "Nar_2_3.mp3" },
            { text: "몇일 휴가를 사용해 나는 그곳을 방문해보기로 했다.", audio: "Nar_2_4.mp3" },
            { text: ".....별일 있겠어?                  ", audio: "Nar_2_5.mp3" }
        ];
        const textElement = document.querySelector(".text");
        const audioElement = document.getElementById("audio");
        let index = 0;
        let charIndex = 0;
        let isDeleting = false;

        function typing() {
            if (index < content.length) {
                if (!isDeleting && charIndex < content[index].text.length) {
                    textElement.innerHTML += content[index].text.charAt(charIndex);
                    charIndex++;
                } else if (isDeleting && charIndex > 0) {
                    textElement.innerHTML = content[index].text.substring(0, charIndex - 1);
                    charIndex--;
                } else if (!isDeleting && charIndex === content[index].text.length) {
                    playAudio(content[index].audio);
                    isDeleting = true;
                    setTimeout(typing, 3000); // 잠시 멈춤 후 지우기 시작
                    return;
                } else if (isDeleting && charIndex === 0) {
                    isDeleting = false;
                    index++;
                    if (index < content.length) {
                        textElement.innerHTML += '<br>'; // 줄 바꿈 추가
                    }
                }
            } else {
                clearInterval(typingInterval);
            }
            setTimeout(typing, isDeleting ? 10 : 100); // 타이핑 속도와 지우기 속도 설정
        }

        function playAudio(audioSrc) {
            audioElement.src = audioSrc;
            audioElement.play();
        }

        typing(); // 글자 타이핑 시작
    </script>

</body>
</html>
